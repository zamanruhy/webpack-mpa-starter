<%
  className = typeof className !== 'undefined' ? className : ''
  img = typeof img !== 'undefined' ? img : false
  attrs = typeof attrs !== 'undefined' ? attrs : {}

  const attrsStr = Object.entries(attrs)
    .map((p) => `${p[0]}="${p[1]}"`)
    .join(' ')
  const { id, viewBox } = data
  const url = `static/img/sprite.svg#${id}`
  const [width, height] = viewBox.split(' ').slice(-2).map(Number)
  const name = id.replace(/^icon-|-usage$/g, '')
  const classes = ['icon', `icon_${name}`, className].filter(Boolean).join(' ')
%>

<% if (img) { %>
  <img
    class="<%= classes %>"
    src="<%= url %>"
    width="<%= width %>"
    height="<%= height %>"
    alt=""
    aria-hidden="true"
    <%= attrsStr %>
  />
<% } else { %>
  <svg class="<%= classes %>" viewBox="<%= viewBox %>" aria-hidden="true" <%= attrsStr %>>
    <use xlink:href="<%= url.replace('-usage', '') %>" />
  </svg>
<% } %>
